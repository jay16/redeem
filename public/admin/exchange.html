<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="0">
<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="renderer" content="webkit">
<title>兑换信息管理 - 管理系统</title>
<meta name="google-site-verification" content="">
<meta name="DC.title" content="Project Name">
<meta name="DC.subject" content="">
<meta name="DC.creator" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<link rel="shortcut icon" href="assets/images/favicon.ico?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/bootstrap.min.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/font-awesome.min.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/ionicons.min.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/AdminLTE.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/skins/_all-skins.min.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/bootstrap-dialog.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/sco.message.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/dataTables.bootstrap.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/jquery.dataTables.yadcf.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/jquery-ui.min.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/lightbox.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/common.css?t=180410">
<link media="all" type="text/css" rel="stylesheet" href="assets/stylesheets/layer.css?v=3.0.11110&timestamp=1523289708">

<script src="assets/javascripts/jquery-2.1.1.min.js?t=180410"></script>
<script src="assets/javascripts/jquery-ui.min.js?t=180410"></script>
<script src="assets/javascripts/bootstrap.min.js?t=180410"></script>
<script src="assets/javascripts/plugins/slimScroll/jquery.slimscroll.min.js?t=180410"></script>
<script src="assets/javascripts/plugins/fastclick/fastclick.min.js?t=180410"></script>
<script src="assets/javascripts/plugins/layer/layer.js?t=180410"></script>
<script src="assets/javascripts/bootstrap-dialog.js?t=180410"></script>
<script src="assets/javascripts/sco.message.js?t=180410"></script>
<script src="assets/javascripts/jquery.dataTables.min.js?t=180410"></script>
<script src="assets/javascripts/jquery.dataTables.yadcf.js?t=180410"></script>
<script src="assets/javascripts/dataTables.bootstrap.js?t=180410"></script>
<script src="assets/javascripts/lightbox.min.js?t=180410"></script>
<script src="assets/javascripts/app.min.js?t=180410"></script>
<script src="assets/javascripts/plupload/plupload.full.min.js?t=180410"></script>
<script src="assets/javascripts/plupload/jquery.plupload.queue/jquery.plupload.queue.min.js?t=180410"></script>
<script src="assets/javascripts/plupload/i18n/zh_CN.js?t=180410"></script>
<script src="assets/javascripts/common_upload.js?t=180410"></script>
<script src="assets/javascripts/ajaxfileupload.min.js?t=180410"></script>

<script src="assets/javascripts/server_api.js?t=180410"></script>
<script src="assets/javascripts/tkh.js?t=180410"></script>
  <script type="text/javascript" src="assets/javascripts/jQueryRotate.2.2.js"></script>
</head>
<body class="skin-blue sidebar-mini">
<div class="wrapper">


  <header class="main-header">
    <!-- Logo -->
    <a href="#" class="logo">
      <!-- mini logo for sidebar mini 50x50 pixels -->
    <span class="logo-mini"><b></b>管理</span>
      <!-- logo for regular state and mobile devices -->
    <span class="logo-lg"><b>管理系统</b>平台</span>
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top" role="navigation">
      <!-- Sidebar toggle button-->
      <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
        <span class="sr-only">Toggle navigation</span>
      </a>
      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
          <!-- User Account: style can be found in dropdown.less -->
          <li class="dropdown user user-menu">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                <span class="hidden-xs">
                    <i class="fa fa-user fa-fw"></i>
                     <span class='current-username'></span>
                     <i class="fa fa-caret-down"></i>
                </span>
            </a>
            <ul class="dropdown-menu">
              <!-- Menu Footer-->
              <li class="user-footer">
                <div class="pull-right">
                  <a href="javascript:void(0);" onclick="window.ServerAPI.logout();">
                    <i class="fa fa-sign-out fa-fw"></i>
                    退出登录
                  </a>
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </nav>
  </header>

  <aside class="main-sidebar">
    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar" style="height: auto;">
    <!-- sidebar menu: : style can be found in sidebar.less -->
    <ul class="sidebar-menu">
    <li class="treeview treeview-manager">
      <a href="#">
        <i class="fa fa-fw fa-user"></i>
        <span>管理员管理</span>
        <i class="fa fa-angle-left pull-right"></i>
      </a>
      <ul class="treeview-menu">
        <li>
          <a href="manager.html?t=180410" data-parent="treeview-manager">
            <i class="fa fa-fw fa-info"></i>后端管理员</a>
        </li>
        <li>
          <a href="user.html?t=180410" data-parent="treeview-manager">
            <i class="fa fa-fw fa-info"></i>管理员管理</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="member.html?t=180410">
        <i class="fa fa-fw fa-won"></i><span>会员管理</span></a>
    </li>
    <li>
      <a href="consume.html?t=180410">
        <i class="fa fa-fw fa-circle-thin"></i><span>消费管理</span></a>
    </li>
    <li>
      <a href="consume_score.html?t=180410">
        <i class="fa fa-fw fa-sliders"></i><span>积分管理</span></a>
    </li>
    <li class="treeview treeview-store">
      <a href="#">
        <i class="fa fa-fw  fa-dashboard"></i>
        <span>店铺管理</span>
        <i class="fa fa-angle-left pull-right"></i>
      </a>
      <ul class="treeview-menu">
        <li>
          <a href="store.html?t=180410" data-parent="treeview-store">
            <i class="fa fa-fw fa-info"></i>店铺列表</a>
        </li>
        <li>
          <a href="sync-store.html?t=180410" data-parent="treeview-store">
            <i class="fa fa-fw fa-info"></i>同步店铺</a>
        </li>
      </ul>
    </li>
    <li class="treeview treeview-gift">
      <a href="#">
        <i class="fa fa-fw  fa-dashboard"></i>
        <span>礼品管理</span>
        <i class="fa fa-angle-left pull-right"></i>
      </a>
      <ul class="treeview-menu">
        <li>
          <a href="gift.html?t=180410" data-parent="treeview-gift">
            <i class="fa fa-fw fa-info"></i>礼品列表</a>
        </li>
        <li>
          <a href="sync-gift.html?t=180410" data-parent="treeview-gift">
            <i class="fa fa-fw fa-info"></i>同步礼品</a>
        </li>
      </ul>
    </li>
    <li class="treeview treeview-questionnaire">
      <a href="#">
        <i class="fa fa-fw  fa-dashboard"></i>
        <span>问卷管理</span>
        <i class="fa fa-angle-left pull-right"></i>
      </a>
      <ul class="treeview-menu">
        <li>
          <a href="questionnaire.html?t=180410" data-parent="treeview-questionnaire">
            <i class="fa fa-fw fa-info"></i>问卷列表</a>
        </li>
        <li>
          <a href="answer-list.html?t=180410" data-parent="treeview-questionnaire">
            <i class="fa fa-fw fa-info"></i>回答列表</a>
        </li>
        <li>
          <a href="sync-questionnaire.html?t=180410" data-parent="treeview-questionnaire">
            <i class="fa fa-fw fa-info"></i>同步问卷</a>
        </li>
        <li style="display: none;">
          <a href="ipad-setting.html?t=180410" data-parent="treeview-questionnaire">
            <i class="fa fa-fw fa-info"></i>前台配置</a>
        </li>
        <li style="display: none;">
          <a href="question-data-com.html?t=180410" data-parent="treeview-questionnaire">
            <i class="fa fa-fw fa-info"></i>问卷重新提交</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="exchange.html?t=180410">
        <i class="fa fa-fw fa-soccer-ball-o"></i><span>兑换管理</span></a>
    </li>
    <li>
      <a href="signature.html?t=180410">
        <i class="fa fa-fw fa-cc-discover"></i><span>签名管理</span></a>
    </li>
    <li>
      <a href="ipad-setting.html?t=180410">
        <i class="fa fa-fw fa-tasks"></i><span>iPad 设置</span></a>
    </li>
    <li class="li-api-mapping hidden">
      <a href="api-mapping.html?t=180410">
        <i class="fa fa-fw fa-shekel"></i><span>接口映射</span></a>
    </li>
    <li class="li-logger hidden">
      <a href="logger.html?t=180410">
        <i class="fa fa-fw fa-list"></i><span>日志管理</span></a>
    </li>
    </ul>
    </section>
  </aside>


  <div class="content-wrapper">
    <section class="content-header">
      <h1>兑换信息管理</h1>
      <ol class="breadcrumb">
        <li>
          <a href="index.html">
            <i class="fa fa-dashboard"></i>首页</a>
        </li>
        <li>兑换信息管理</li></ol>
    </section>

    <style>
.col-lg-12{ margin-bottom: 20px;}
.col-lg-12 .input-1{width: 15%; display: inline;}
.col-lg-12 .form-control{width: 15%; }
</style>
<section class="content">
  <div class="row">
    <div class="col-lg-12">
      <form action="exchange.html" method="get">
          <select class="form-control" id="redeem_state" name="redeem_state" style="display: inline-block;">
            <option value="" selected>请选择状态</option>
            <option value="兑换成功">兑换成功</option>
            <option value="未兑换">未兑换</option>
          </select>

        <input type="text" name="gift_name" value="" placeholder="礼品名" class="form-control input-1">
        <input type="text" name="member" value="" placeholder="会员名" class="form-control input-1">
        <input type="text" name="telphone" value="" placeholder="会员电话" class="form-control input-1">
        <input type="submit" id="addSysem" class="btn btn-success btn-xm" value="搜索" /></form>
    </div>
    <div class="col-lg-12">
      <div class="panel panel-default">
        <table id="tableRecords" class="table table-striped table-condensed table-hover" width="100%"></table>
      </div>
    </div>
  </div>
</section>
<div id="imageWrapper">
</div>
<script type="text/javascript">
$(document).ready(function() {
  var oTable = $('#tableRecords').DataTable({
    //bFilter: false,
    "columnDefs": [{
      "title": "ID",
      "name": "id",
      "targets": 0,
      "orderable": true,
      "searchable": false
    },
    {
      "title": "会员",
      "name": "member",
      "targets": 1,
      "orderable": true,
      "searchable": false
    },
    {
      "title": "会员电话",
      "name": "member",
      "targets": 2,
      "orderable": true,
      "searchable": false
    },
    {
      "title": "兑换金额",
      "name": "consumer_amount",
      "targets": 3,
      "orderable": true,
      "searchable": false
    },
    {
      "title": "状态",
      "name": "status",
      "targets": 4,
      "orderable": true,
      "searchable": true
    },
    {
      "title": "礼品名称",
      "name": "fname",
      "targets": 5,
      "orderable": true,
      "searchable": true
    },
    {
      "title": "兑换人",
      "name": "fmemname",
      "targets": 6,
      "orderable": true,
      "searchable": true
    },
    {
      "title": "兑换人电话",
      "name": "fmemmobilephone",
      "targets": 7,
      "orderable": true,
      "searchable": true
    },
    {
      "title": "添加时间",
      "name": "created_at",
      "targets": 8,
      "orderable": false,
      "searchable": false
    },
    {
      "title": "查看图片",
      "targets": 9,
      "orderable": false,
      "searchable": false
    }
    ],
    "bInfo": true,
    "bFilter": false,
    "lengthChange": false,
    "stateSave": false,
    "ordering": false,
    "serverSide": true,
    "pagingType": "full_numbers",
    "deferRender": true,
    "iDisplayLength": 20,
    "iDisplayStart": 0,
    "ajax": {
      "url": window.ServerAPI.server + "/api/v1/list/redeem",
      "data": function(params) {
        var query = window.ServerAPI.params();
        if(query["redeem_state"]) {
          params["redeem_state"] = query["redeem_state"];

          $("#redeem_state").children("option").each(function() {
            if($(this).attr("value") === query["redeem_state"]) {
              $(this).attr("selected", "selected");
            }
          });
        }
        if(query["gift_name"]) {
          params["gift_name"] = query["gift_name"];
          $("input[name=gift_name]").val(query["gift_name"]);
        }
        if(query["member"]) {
          params["member"] = query["member"];
          $("input[name=member]").val(query["member"]);
        }
        if(query["telphone"]) {
          params["telphone"] = query["telphone"];
          $("input[name=telphone]").val(query["telphone"]);
        }
        return params;
      }
    },
    "drawCallback": function(settings) {
      $(".iframe").off('click').on('click', function(event) {
        event.preventDefault();

        $("#imageWrapper").css({"display": "block"});
        $("#imageWrapper").html("<div id='imageList'></div>")
        var $imageList = $("#imageList");
        var imageName = "无图片";
        $imageList.html("<p style='text-align:center;'>" + imageName + "</p>");

        if($(event.target) && $(event.target).data("images")) {
            $imageList.empty();
            /*===updatecynthia 0925 start===*/
            imageName = $(event.target).data("images").split(",");
            for(i=0;i<imageName.length;i++)
            {$imageList.append("<div style='position:relative'><div style='text-align:center;position:absolute;left:35%;top:0px;z-index:999'><button>旋转图片</button></div><img style='max-width:100%;max-height:100%;margin-top:30px;' src='/images/tkh/" + imageName[i] + "' /></div>");}
            /*===updatecynthia 0925 end===*/
            var num = 0;
            $("#imageList").on("click","button",function(){
                num ++;
                $(this).parents("div").next("img").rotate(90*num);
            })
        }

        layer.open({
          type: 1,
          title: "查看图片",
          area: ["400px", "300px"],
          content: $imageList,
          cancel: function() {
            $("#imageWrapper").css({"display": "none"});
          }
        });
      });
    }
  });

  // var foot = $('#tableRecords').find('tfoot');
  // if (!foot.length) {
  //   foot = $('<tfoot>').appendTo($('#tableRecords'));
  //   var tr = $("<tr></tr>");
  //   for (var i = 0; i < $('#tableRecords thead th').length; i++) {
  //     $('<th>').appendTo(tr);
  //   }
  //   foot.append(tr);
  // }

});
</script>

  </div>

  <footer class="main-footer">
  <div class="pull-right hidden-xs">
    version: <b>0.3.4</b>
  </div>
  <span id="copyright"></span> all rights reserved.
</footer>
<script type="text/javascript">
$(document).ready(function() {
  var developedYear = "2017",
      todayYear = (new Date()).getFullYear(),
      copyrightYield = developedYear;

  if(parseInt(developedYear) < parseInt(todayYear)) {
    copyrightYield = developedYear + '-' + todayYear;
  }
  document.getElementById("copyright").innerHTML = "copyright © " + copyrightYield + " <a href='#'>hd studio</a>.";
});
</script>

</div>
<script src="assets/javascripts/common.js?t=180410"></script>
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="assets/javascripts/html5.js"></script>
<![endif]-->
</body>
</html>
